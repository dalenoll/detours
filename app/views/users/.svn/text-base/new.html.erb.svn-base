<h1>New user</h1>

<% form_for(@user) do |f| %>
  <%= f.error_messages %>

  <table>
    <tr>
      <td>
          <%= f.label :username %><br />
          <%= f.text_field :username, :size => 20 %>
      </td>
      <td>
          <%= f.label :full_name %><br />
          <%= f.text_field :full_name, :size => 40 %>
      </td>
    </tr>
    <tr>
      <td>
        <%= f.label :user_password, 'Password' %><br />
        <%= f.password_field :password, :size => 20 %>
      </td>
      <td>
        <%= f.label :user_password_confirmation, 'Confirm' %><br />
        <%= f.password_field :password_confirmation, :size => 20 %>
      </td>
    </tr>
  </table> 
  <table id='right-list'>
    <tr>
      <th>Role Name</th>
      <th>Member<th>
    </tr>
    <% @available_roles.each_with_index do | role, index | %>
      <% fields_for "@available_roles[#{index}]", role  do |f| %>
        <tr class="<%= cycle('right-line-odd', 'right-line-even') %>">
           <td><%= role.role_name %></td>
           <td style='text-align: center;'><%= f.check_box :role_allowed %></td>
           <%= f.hidden_field :role_name %>
         </tr>
       <% end %>
     <% end %>
   </table>

  <p>
    <%= f.submit "Create" %>
  </p>
<% end %>

<div id='lower-navigation'>
<h2>
<%= link_to 'Back to list', users_path %>
</h2>
</div>
